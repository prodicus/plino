<!DOCTYPE html>
<!-- 
# -*- coding: utf-8 -*-
# @Author:  Nitesh Sharma
# @Date:   2016-03-14
# @Last Modified by:   Nitesh Sharma
# @Last Modified time: 2016-03-29 07:17:50
# @MIT License
# @https://github.com/sinscary

 -->

<html>
<head>
	<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>{% block title %}Spam Filter{% endblock %}</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="stylesheet" href="/static/css/animate.css">
    <script type="text/javascript" src="/static/js/jquery-2.2.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js"></script>
    <script type="text/javascript" src="/static/js/wow.js"></script>
    <script type="text/javascript">
    //<![CDATA[
      $(window).load(function() { // makes sure the whole site is loaded
        $('#status').fadeOut('slow'); // will first fade out the loading animation
        $('#preloader').delay(350).fadeOut('slow'); // will fade out the white DIV that covers the website.
        $('body').delay(350).css({'overflow':'visible'});
      })
    //]]>
  </script>
</head>
<body>
  <div id="preloader">
    <div id="status">&nbsp;</div>
  </div>
	<div class="navbar-fixed" id="navbarfix">
		<nav>
  			<div class="nav-wrapper z-depth-1">
    			<a href="{{ url_for('index') }}" class="black-text brand-logo"><img src="/static/images/logo_2.png" style="margin-left:30px;"></a>
    			<a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons" style="color:black">menu</i></a>
    			<ul class="right hide-on-med-and-down">
      				<li><a href="{{ url_for('index') }}" class="black-text">Home</a></li>
      				<li><a href="{{ url_for('about') }}" class="black-text">About</a></li>
    			</ul>
    			<ul class="side-nav" id="mobile-demo">
    				<li><a href="{{ url_for('index') }}" class="black-text">Home</a></li>
    				<li><a href="{{ url_for('about') }}" class="black-text">About</a></li>
    			</ul>
  			</div>
		</nav>
	</div>
  <div class="background-img shadow">
    <center><a href="#textarea1" id="slidedown"><i class="fa fa-angle-down circle-n wow bounceInDown" data-wow-duration="2000ms" data-wow-delay="600ms"></i></a></center>
  </div>
	<main class="div-side" id="main-content">
		<div class="container contents">
	    	{% block content %}{% endblock %}    
	   </div>
  </main>
    <footer class="page-footer">
      	<div class="">
        	<div class="row">
        		<div class="col l2 offset-l1 s12">
	            	<h5 class="black-text wow slideInLeft" data-wow-duration="1500ms" data-wow-delay="300ms"><a class="black-text text-lighten-3" href="#!">Spam Filter</a></h5>
	            	<ul>
	              		<li class="wow slideInLeft"  data-wow-duration="1500ms" data-wow-delay="300ms"><a class="black-text text-lighten-3" href="#!">Home</a></li>
                </ul>
                <ul>
	              		<li class="wow slideInLeft"  data-wow-duration="1500ms" data-wow-delay="300ms"><a class="black-text text-lighten-3" href="#!"><a class="black-text text-lighten-3" href="#!">About us</a></li>
	            	</ul>
	          	</div>
	          	<div class=" col l4 offset-l5 s12">
                    <a class="social-icons" href="http://twitter.com/"><i class="fa fa-twitter circle wow slideInRight" data-wow-duration="1500ms" data-wow-delay="300ms"></i></a>
                    <a class="social-icons" href="http://youtube.com/"><i class="fa fa-github circle wow slideInRight" data-wow-duration="1500ms" data-wow-delay="300ms"></i></a>
	          	</div>
        	</div>
      	</div>
      	<div class="footer-copyright">
        	<div class="container">
        		<center class="black-text wow fadeInUp" data-wow-duration="1500ms" data-wow-delay="300ms">Â© 2016 Copyright</center>
        	</div>
      	</div>
    </footer>

  	<script type="text/javascript">
		
    $("#Submit").click(function(){
        var messageTxt = $('#textarea1').val();
        /*var unicodeErrorTxt = "Looks like we had an Encoding issue! Please try something different";
        $('#unicodeError').removeClass("alert alert-warning");
        $('#result').removeClass("alert alert-danger");
        $('#result').removeClass("alert alert-success");*/
        if(messageTxt.length <= 10){
          $('#addcard').append('<div class="row"><div class="col s12 m6 l6"><div class="card red"><div class="card-content black-text"><span class="card-title">Please give me more text to analyze!</span><p></p></div></div></div></div>');
        }
        if (messageTxt.length > 10){
          $.post('/api/classify',{message: messageTxt},function(result){

            if(result.category == 'spam'){
              $('#addcard').find('div:nth-child(2)').remove();
              console.log('text is a spam');
      				$('#addcard').append('<div class="row"><div class="col s12 m6 l6"><div class="card red flow-text"><div class="card-content black-text"><span class="card-title">OOPS, it seems spam content</span><p></p></div></div></div></div>');
      			}
            else if(result.category == 'ham'){
              $('#addcard').find('div:nth-child(2)').remove();
              console.log('text is a ham');
              $('#addcard').append('<div class="row"><div class="col s12 m6 l6"><div class="card green" style="margin-top:20px;"><div class="card-content black-text"><span class="card-title">Yaay, this content is spam-free</span><p></p></div></div></div></div>');
            }
            else if(result.category == 'UnicodeEncodeError'){
              $('#addcard').find('div:nth-child(2)').remove();
              console.log('UnicodeEncodeError');
              $('#addcard').append('<div class="row"><div class="col s12 m6 l6"><div class="card orange lighten-3"><div class="card-content black-text"><span class="card-title">Sorry, there was an Encoding issue.</span><p></p></div></div></div></div>');
            }
        });
      }
		});
  	</script>

    <script type="text/javascript">
    	$(document).ready(function(){
    		$(".button-collapse").sideNav();
    		$('#textarea1').trigger('autoresize');

        $("#slidedown").click(function() {
            $('html, body').animate({
                scrollTop: $("#main-content").offset().top
            }, 1000);
        });
    	});
      var wow = new WOW(
        {
          boxClass:     'wow',      // animated element css class (default is wow)
          animateClass: 'animated', // animation css class (default is animated)
          offset:       0,          // distance to the element when triggering the animation (default is 0)
          mobile:       true,       // trigger animations on mobile devices (default is true)
          live:         true,       // act on asynchronously loaded content (default is true)
          callback:     function(box) {
            // the callback is fired every time an animation is started
            // the argument that is passed in is the DOM node being animated
          },
          scrollContainer: null // optional scroll container selector, otherwise use window
        }
      );
      wow.init();
    </script>
</body>
</html>